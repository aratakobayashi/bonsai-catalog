# 🖼️ アイキャッチ画像管理ワークフロー

## 📋 概要

盆栽カタログサイトでは、**自動検出システム**により簡単にアイキャッチ画像を設定・変更できます。

## 🆕 新規記事のアイキャッチ設定

### ⚡ 自動検出機能

新規記事作成時は**自動検出機能**により、ファイル配置だけで自動設定されます。

#### 📋 ファイル命名規則（優先順位）
```
public/images/articles/{記事slug}-main.png     ← 最優先
public/images/articles/{記事slug}-img-1.png   ← 2番目
public/images/articles/{記事slug}.png         ← 3番目
```

#### 🔄 動作フロー
1. **記事作成**: Supabaseに新規記事を作成
2. **自動検出**: slugに基づいて画像ファイルを検索
3. **自動設定**: 見つかった画像を`featuredImage`に設定

---

## 🔧 既存記事のアイキャッチ変更

### ⚡ 簡単3ステップワークフロー

#### 1️⃣ VSCodeで画像ファイル配置
```
public/images/articles/article-XX-main.png
```

#### 2️⃣ Claude Codeに依頼
```
「article-XXのアイキャッチ更新して」
```

#### 3️⃣ 自動完了プロセス
Claude Codeが以下を自動実行：
- ✅ データベース`featured_image_url`更新
- ✅ 画像ファイルのGit追加・コミット・プッシュ
- ✅ Vercel自動デプロイ
- ✅ 数分後にサイト反映

---

## 🎯 具体的な使用例

### 📝 例：記事「article-50」のアイキャッチ変更

#### ステップ実行
1. **ファイル配置**: `public/images/articles/article-50-main.png`
2. **Claude Code依頼**: 「article-50のアイキャッチ更新して」
3. **完了**: 数分後に新画像が表示

#### 結果確認
- ✅ https://bonsai-collection.com/guides/article-50 でアイキャッチ確認
- ✅ 記事一覧ページでサムネイル確認

---

## 📐 推奨画像仕様

### 🎨 画像品質基準

| 項目 | 推奨値 | 必須/推奨 | 備考 |
|------|--------|-----------|------|
| **ファイル形式** | PNG | 推奨 | JPG、JPEG、WEBPも対応 |
| **ファイルサイズ** | 3MB以下 | 必須 | サイト表示速度のため |
| **画像サイズ** | 1200x630px | 推奨 | 16:9比率でSNS最適化 |
| **命名規則** | `{slug}-main.png` | 必須 | 自動検出のため |

### 🎨 デザインガイドライン

- **高画質**: ぼやけていない鮮明な画像
- **一貫性**: サイト全体のトーンに合った色味
- **読みやすさ**: テキストオーバーレイがある場合は可読性重視
- **季節感**: 樹種に応じた季節の表現

---

## ⚠️ トラブルシューティング

### 🚨 よくある問題と解決法

#### 問題1: 画像が表示されない
**原因**: 画像ファイルがGitに追加されていない
**解決**: Claude Codeに「画像ファイルをGitに追加して」と依頼

#### 問題2: 古い画像が表示される
**原因**: ブラウザキャッシュ
**解決**: スーパーリロード（Cmd+Shift+R / Ctrl+Shift+R）

#### 問題3: ファイル名が認識されない
**原因**: 命名規則不一致
**解決**: `{slug}-main.png`形式に変更

---

## 🔧 技術仕様

### 🖥️ 自動検出システム

#### 検索パターン（優先順位）
```javascript
const patterns = [
  `${slug}-main`,      // 最優先
  `${slug}-img-1`,     // 2番目
  `${slug}`,           // 3番目
]
```

#### 対応拡張子
```javascript
const extensions = ['.png', '.jpg', '.jpeg', '.webp']
```

### 📊 動作環境
- **新規記事**: createArticle関数で自動検出
- **既存記事**: Claude Codeのスクリプトで手動更新
- **サーバー**: Node.js（サーバーサイドのみ）

---

## 📋 チェックリスト

### ✅ アイキャッチ変更前の確認

- [ ] 画像ファイルの品質確認
- [ ] ファイル名が正しい命名規則
- [ ] ファイルサイズが3MB以下
- [ ] 画像サイズが適切（1200x630px推奨）

### ✅ 変更後の確認

- [ ] 記事詳細ページでアイキャッチ表示
- [ ] 記事一覧ページでサムネイル表示
- [ ] スマートフォンでの表示確認
- [ ] SNSシェア時の画像確認

---

## 🚀 今後の予定

### 🔮 機能改善計画

- [ ] **一括変更機能**: 複数記事のアイキャッチを一括更新
- [ ] **画像最適化**: 自動リサイズ・圧縮機能
- [ ] **プレビュー機能**: 変更前の表示確認
- [ ] **テンプレート機能**: 樹種別アイキャッチテンプレート

---

**📝 このワークフローにより、アイキャッチ画像の管理が簡単かつ効率的になり、サイト全体の品質向上に貢献します。**
# 📋 ガイド記事統合プロジェクト - 要件定義書

## 1. プロジェクト概要

### 1.1 プロジェクト名
盆栽コレクション - ガイド記事統合プロジェクト

### 1.2 背景
- 現在、記事コンテンツ（bonsai-guidebook.net）と商品カタログ（bonsai-collection.com）が分離
- SEOパワーが分散し、記事から商品への導線が弱い
- 統合によりSEO効果の最大化とコンバージョン向上を図る

### 1.3 目的
1. **SEO強化**: ドメイン統合によるSEOパワーの集約
2. **ユーザー体験向上**: 記事から商品へのシームレスな導線構築
3. **運用効率化**: コンテンツ管理の一元化

### 1.4 スコープ
- ✅ WordPress記事のAPI連携によるNext.js表示
- ✅ カテゴリー・タグによる検索機能
- ✅ 記事と商品の相互連携
- ✅ SEO最適化（メタタグ、構造化データ）
- ❌ WordPress管理画面のカスタマイズ（将来課題）
- ❌ 記事のコメント機能（Phase 2で検討）

## 2. ステークホルダー

| 役割 | 責任範囲 | 期待する成果 |
|------|---------|------------|
| サイト運営者 | プロジェクト承認、コンテンツ作成 | 集客向上、売上増加 |
| 開発者 | システム実装、保守 | 安定稼働、拡張性確保 |
| 記事編集者 | 記事作成、更新 | 使いやすい編集環境 |
| サイト訪問者 | - | 有益な情報、スムーズな購買体験 |

## 3. 機能要件

### 3.1 記事表示機能

#### 3.1.1 記事一覧ページ（/guides）
- **必須機能**
  - WordPress APIからの記事一覧取得
  - ページネーション（1ページ12記事）
  - カテゴリー別フィルタリング
  - タグ別フィルタリング
  - 新着順/人気順ソート
  
- **表示項目**
  - アイキャッチ画像
  - タイトル
  - 抜粋（150文字）
  - カテゴリー
  - タグ（最大3個）
  - 公開日
  - 読了時間

#### 3.1.2 記事詳細ページ（/guides/[slug]）
- **必須機能**
  - WordPress記事本文の表示
  - 目次自動生成
  - 関連商品表示（タグベース）
  - 関連記事表示
  - SNSシェアボタン
  
- **表示項目**
  - タイトル
  - アイキャッチ画像
  - 本文（WordPress HTML）
  - カテゴリー・タグ
  - 投稿日・更新日
  - 著者情報

### 3.2 検索・フィルタリング機能

#### 3.2.1 検索条件
- **カテゴリー検索**
  - 育て方
  - 選び方
  - 知識・歴史
  - お手入れ
  - 季節の管理

- **タグ検索**
  - 初心者向け
  - 室内栽培
  - 松柏類
  - 花もの
  - 実もの
  - 季節別（春/夏/秋/冬）

- **フリーワード検索**
  - タイトル・本文からの全文検索

### 3.3 記事-商品連携機能

#### 3.3.1 関連商品表示ロジック
```
IF 記事タグ contains "松" THEN
  表示商品 = ["五葉松", "黒松", "赤松"]
  
IF 記事タグ contains "初心者" THEN
  表示商品 = ["初心者セット", "ミニ盆栽", "育成キット"]
  
IF 記事カテゴリー = "選び方" THEN
  表示商品 = カテゴリー関連商品TOP5
```

#### 3.3.2 商品ページからの記事リンク
- 商品詳細ページに関連記事セクション追加
- タグマッチングによる自動表示

### 3.4 SEO要件

#### 3.4.1 メタタグ
- 動的なtitle生成: `[記事タイトル] | 盆栽コレクション`
- description: 記事抜粋または指定文
- keywords: 記事タグから自動生成
- canonical URL設定

#### 3.4.2 構造化データ
- Article Schema
- BreadcrumbList Schema
- Organization Schema

#### 3.4.3 サイトマップ
- 記事用XMLサイトマップ自動生成
- 更新頻度: daily

## 4. 非機能要件

### 4.1 パフォーマンス要件
| 指標 | 目標値 | 測定方法 |
|------|--------|---------|
| ページ読込時間 | < 2秒 | Lighthouse |
| LCP | < 2.5秒 | Core Web Vitals |
| FID | < 100ms | Core Web Vitals |
| CLS | < 0.1 | Core Web Vitals |
| API応答時間 | < 500ms | - |

### 4.2 可用性要件
- サービス稼働率: 99.9%以上
- WordPressダウン時のフォールバック機能

### 4.3 セキュリティ要件
- HTTPS必須
- WordPress API エンドポイントの制限
- Rate Limiting実装
- XSS対策（HTMLサニタイズ）

### 4.4 互換性要件
- **ブラウザ**: Chrome, Safari, Firefox, Edge（最新2バージョン）
- **デバイス**: PC, タブレット, スマートフォン
- **レスポンシブ対応**: 必須

## 5. 制約事項

### 5.1 技術的制約
- WordPress REST API v2を使用
- Next.js 14以上
- Vercelでのホスティングを前提

### 5.2 運用制約
- 記事編集はWordPress管理画面を継続使用
- 画像はWordPressメディアライブラリ管理

### 5.3 予算・期間制約
- 開発期間: 4週間
- 運用コスト: 月額5,000円以内

## 6. 成功指標（KPI）

### 6.1 短期目標（3ヶ月）
| 指標 | 現状 | 目標 |
|------|------|------|
| 月間オーガニック流入 | - | 5,000 PV |
| 記事→商品CTR | - | 10% |
| 平均滞在時間 | - | 3分 |

### 6.2 中期目標（6ヶ月）
| 指標 | 目標 |
|------|------|
| 月間オーガニック流入 | 20,000 PV |
| 記事→商品CTR | 15% |
| コンバージョン率 | 3% |

### 6.3 長期目標（12ヶ月）
| 指標 | 目標 |
|------|------|
| 月間オーガニック流入 | 50,000 PV |
| 記事→商品CTR | 20% |
| コンバージョン率 | 5% |

## 7. リスクと対策

| リスク | 影響度 | 発生確率 | 対策 |
|--------|--------|----------|------|
| WordPress API障害 | 高 | 低 | キャッシュ機能実装、静的生成 |
| SEO順位低下 | 高 | 中 | 301リダイレクト、段階的移行 |
| 記事移行ミス | 中 | 低 | 十分なテスト、段階的公開 |
| パフォーマンス低下 | 中 | 中 | CDN活用、最適化実施 |

## 8. 前提条件

1. WordPress（bonsai-guidebook.net）は継続運用
2. 既存の100記事は全て移行対象
3. 記事URLは変更（リダイレクト設定）
4. 記事編集者はWordPress操作に習熟

## 9. 用語定義

| 用語 | 定義 |
|------|------|
| ガイド記事 | 盆栽に関する教育的コンテンツ |
| API連携 | WordPress REST APIを通じたデータ取得 |
| SSG | Static Site Generation（静的サイト生成） |
| ISR | Incremental Static Regeneration |
| CTR | Click Through Rate（クリック率） |

## 10. 承認

| 役割 | 氏名 | 承認日 | 署名 |
|------|------|--------|------|
| プロジェクトオーナー | | | |
| 開発責任者 | | | |
| コンテンツ責任者 | | | |

---

**文書情報**
- バージョン: 1.0
- 作成日: 2024年
- 最終更新日: 2024年
- 次回レビュー予定: Phase 1完了時